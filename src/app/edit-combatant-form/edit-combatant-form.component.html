<form #combatantInfoForm>
  <md-form-field class="full-width">
    <input name="name" mdInput placeholder="Name" [(ngModel)]="combatant.name" required cdk-focus-region-start>
  </md-form-field>
  <table class="full-width">
    <td>
      <md-form-field floatPlaceholder="always">
        <input name="initiative" type="number" mdInput placeholder="Initiative" [(ngModel)]="combatant.combat.initiative" required>
      </md-form-field>
    </td>
    <td>
      <md-form-field floatPlaceholder="always">
        <input name="ac" type="number" mdInput placeholder="Armor Class" [(ngModel)]="combatant.data.ac">
      </md-form-field>
    </td>
  </table>
  <table class="full-width">
    <td>
      <md-form-field floatPlaceholder="always">
        <input name="currentHP" type="number" mdInput placeholder="Current HP" [(ngModel)]="combatant.combat.hp">
      </md-form-field>
    </td>
    <td><strong>/</strong></td>
    <td>
      <md-form-field floatPlaceholder="always">
        <input name="maxHP" type="number" mdInput placeholder="Max HP" [(ngModel)]="combatant.data.maxhp">
      </md-form-field>
    </td>
  </table>
  <table class="full-width">
    <td>
      <md-form-field floatPlaceholder="always">
        <input name="strength" type="number" mdInput placeholder="STR{{combatant.data.stats.str ? ' (' + calcModAsString(combatant.data.stats.str) + ')' : ''}}" [(ngModel)]="combatant.data.stats.str">
      </md-form-field>
    </td>
    <td>
      <md-form-field floatPlaceholder="always">
        <input name="dexterity" type="number" mdInput placeholder="DEX{{combatant.data.stats.dex ? ' (' + calcModAsString(combatant.data.stats.dex) + ')' : ''}}" [(ngModel)]="combatant.data.stats.dex">
      </md-form-field>
    </td>
    <td>
      <md-form-field floatPlaceholder="always">
        <input name="constitution" type="number" mdInput placeholder="CON{{combatant.data.stats.con ? ' (' + calcModAsString(combatant.data.stats.con) + ')' : ''}}" [(ngModel)]="combatant.data.stats.con">
      </md-form-field>
    </td>
    <td>
      <md-form-field floatPlaceholder="always">
        <input name="intelligence" type="number" mdInput placeholder="INT{{combatant.data.stats.int ? ' (' + calcModAsString(combatant.data.stats.int) + ')' : ''}}" [(ngModel)]="combatant.data.stats.int">
      </md-form-field>
    </td>
    <td>
      <md-form-field floatPlaceholder="always">
        <input name="wisdom" type="number" mdInput placeholder="WIS{{combatant.data.stats.wis ? ' (' + calcModAsString(combatant.data.stats.wis) + ')' : ''}}" [(ngModel)]="combatant.data.stats.wis">
      </md-form-field>
    </td>
    <td>
      <md-form-field floatPlaceholder="always">
        <input name="charisma" type="number" mdInput placeholder="CHA{{combatant.data.stats.cha ? ' (' + calcModAsString(combatant.data.stats.cha) + ')' : ''}}" [(ngModel)]="combatant.data.stats.cha">
      </md-form-field>
    </td>
  </table>
  <md-form-field *ngIf="mode === 'add'" class="full-width" floatPlaceholder="always">
    <input #monsterInput mdInput placeholder="Monster" [mdAutocomplete]="auto">
    <md-autocomplete #auto="mdAutocomplete" (optionSelected)="monsterSelected($event)">
      <md-option *ngFor="let monster of monsters | monsterFilter:monsterInput.value" [value]="monster.name">
        {{monster.name}}
      </md-option>
    </md-autocomplete>
  </md-form-field>
  <ng-container *ngIf="mode === 'add'">
    <button type="submit" md-raised-button (click)="addCombatant()" [disabled]="!combatant.name || !combatant.combat.initiative" color="primary">
      <span>Add</span>
    </button>
    <button md-raised-button (click)="cancel()" color="warn">
      <span>Cancel</span>
    </button>
  </ng-container>
</form>
